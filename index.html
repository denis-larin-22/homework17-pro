<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homework 17</title>
</head>

<body>
    <script>
        'use strict'

        function getAverage(array) {
            let count = 0;
            let result = array.reduce((acc, item) => {
                if (item != undefined) count++;
                if (item) {
                    return typeof item == 'boolean' ? acc += 1 : acc += item;
                }
                return acc += 0;
            }, 0) / count;

            return +result.toFixed(1);
        }

        function addToArray(array, value) {
            let index = array.findIndex(index => index === undefined);
            if (index != -1) array.splice(index, 1, value);
            return array;
        }

        Student.prototype.age = function () {
            return new Date().getFullYear() - this.byear;
        }

        Student.prototype.gpa = function () {
            return getAverage(this.grade);
        }

        Student.prototype.present = function () {
            return addToArray(this.attendance, true);
        }

        Student.prototype.absent = function () {
            return addToArray(this.attendance, false);
        }

        Student.prototype.mark = function (numb) {
            if (numb > 0 && numb <= 10) return addToArray(this.grade, numb);
            throw 'The mark must be from 1 to 10!';
        }

        Student.prototype.summary = function () {
            let gradeRes = getAverage(this.grade);
            let attendanceRes = getAverage(this.attendance);

            if (gradeRes > 9 && attendanceRes >= 0.9) return 'Ути какой молодчинка!';
            if (gradeRes < 9 && attendanceRes < 0.9) return 'Редиска!';
            if (gradeRes <= 9 || attendanceRes <= 0.9) return 'Норм, но можно лучше!';
        }


        function Student(name, surname, byear) {
            this.name = name;
            this.surname = surname;
            this.byear = byear;
            this.attendance = new Array(10).fill(undefined);
            this.grade = new Array(10).fill(undefined);
        }









        // //check
        // //Denis

        // let denis = new Student('Denis', 'Larin', 1997);

        // denis.present();
        // denis.present();
        // denis.present();
        // denis.present();
        // denis.absent();
        // denis.present();
        // denis.present();
        // denis.present();
        // denis.present();
        // denis.present();

        // denis.mark(10);
        // denis.mark(10);
        // denis.mark(9);
        // denis.mark(10);
        // denis.mark(10);
        // denis.mark(10);
        // denis.mark(9);
        // denis.mark(10);
        // denis.mark(10);
        // denis.mark(10);

        // console.log(denis.age());
        // console.log(denis.gpa());
        // console.log(denis.summary());
        // console.log(denis);

        // ///////Polina

        // let polina = new Student('Polina', 'Kobtseva', 1999);

        // polina.present();
        // polina.present();
        // polina.present();
        // polina.present();
        // polina.present();
        // polina.present();
        // polina.present();
        // polina.present();


        // polina.mark(9);
        // polina.mark(9);
        // polina.mark(9);
        // polina.mark(7);
        // polina.mark(7);
        // polina.mark(9);
        // polina.mark(9);
        // polina.mark(10);


        // console.log(polina.age());
        // console.log(polina.gpa());
        // console.log(polina.summary());
        // console.log(polina);
        // ///////Polina

        // let dima = new Student('Dima', 'Skachkov', 1998);

        // dima.present();
        // dima.absent();
        // dima.present();


        // dima.mark(7);
        // dima.mark(9);
        // dima.mark(8);


        // console.log(dima.age());
        // console.log(dima.gpa());
        // console.log(dima.summary());
        // console.log(dima);

    </script>
</body>

</html>